<div class="operation-container">
  <div class="operation-card">
    <h1>Effectuer un Virement</h1>

    <form [formGroup]="transferForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="recipientAccountNumber">Numéro de Compte Destinataire</label>
        <input
          id="recipientAccountNumber"
          type="text"
          formControlName="recipientAccountNumber"
          placeholder="Ex: ALB-16286571"
          class="form-control"
        />
        <small class="error" *ngIf="transferForm.get('recipientAccountNumber')?.invalid && transferForm.get('recipientAccountNumber')?.touched">
          Numéro de compte invalide (10-20 chiffres)
        </small>
      </div>

      <div class="form-group">
        <label for="recipientName">Nom du Destinataire</label>
        <input
          id="recipientName"
          type="text"
          formControlName="recipientName"
          placeholder="Entrez le nom complet"
          class="form-control"
        />
        <small class="error" *ngIf="transferForm.get('recipientName')?.invalid && transferForm.get('recipientName')?.touched">
          Le nom est requis (min 3 caractères)
        </small>
      </div>

      <div class="form-group">
        <label for="amount">Montant (DH)</label>
        <input
          id="amount"
          type="number"
          formControlName="amount"
          placeholder="Entrez le montant"
          min="0.01"
          step="0.01"
          class="form-control"
        />
        <small class="error" *ngIf="transferForm.get('amount')?.invalid && transferForm.get('amount')?.touched">
          Le montant est requis et doit être positif
        </small>
      </div>

      <div *ngIf="requiresJustification" class="alert alert-warning">
        ⚠️ Un montant supérieur à 10 000 DH nécessite un justificatif (PDF, JPG, PNG)
      </div>

      <div class="form-group">
        <label for="description">Description (optionnel)</label>
        <textarea
          id="description"
          formControlName="description"
          placeholder="Objet du virement"
          rows="4"
          class="form-control"
        ></textarea>
        <small class="info">Max 500 caractères</small>
      </div>

      <div *ngIf="errorMessage" class="alert alert-error">
        {{ errorMessage }}
      </div>

      <div *ngIf="successMessage" class="alert alert-success">
        {{ successMessage }}
      </div>

      <div class="form-actions">
        <button type="submit" [disabled]="isLoading" class="btn btn-primary">
          {{ isLoading ? 'En cours...' : 'Confirmer le Virement' }}
        </button>
        <button type="button" (click)="goBack()" class="btn btn-secondary">
          Annuler
        </button>
      </div>
    </form>
  </div>
</div>
