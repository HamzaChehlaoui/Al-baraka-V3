<div class="history-container">
  <div class="history-header">
    <h1>Historique des Opérations</h1>
    <button (click)="goBack()" class="btn-back">← Retour</button>
  </div>

  <div *ngIf="isLoading" class="loading">
    Chargement des opérations...
  </div>

  <div *ngIf="errorMessage" class="alert alert-error">
    {{ errorMessage }}
  </div>

  <div *ngIf="!isLoading && operations.length > 0; else noOperations" class="operations-table-wrapper">
    <table class="operations-table">
      <thead>
        <tr>
          <th>Date</th>
          <th>Type</th>
          <th>Montant</th>
          <th>Statut</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let op of operations" class="operation-row">
          <td>{{ op.createdAt | date: 'short' }}</td>
          <td class="operation-type">{{ getOperationTypeLabel(op.type) }}</td>
          <td class="amount">{{ op.amount }} {{ op.currency }}</td>
          <td>
            <span class="status-badge" [ngClass]="getStatusClass(op.status)">
              {{ op.status }}
            </span>
          </td>
          <td class="description">{{ op.description || '-' }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <ng-template #noOperations>
    <div class="no-operations">
      <p>Aucune opération disponible</p>
    </div>
  </ng-template>

  <div *ngIf="!isLoading && operations.length > 0" class="pagination">
    <button (click)="previousPage()" [disabled]="currentPage === 1" class="btn btn-nav">
      ← Précédent
    </button>
    <span class="page-info">
      Page {{ currentPage }} sur {{ totalPages }}
    </span>
    <button (click)="nextPage()" [disabled]="currentPage === totalPages" class="btn btn-nav">
      Suivant →
    </button>
  </div>
</div>
